# ===================================================================
# SMM Panel Production Environment Configuration
# Generated: 2025-08-18
# Spring Boot 3.1.7 Compatible
# ===================================================================
# CRITICAL: Store all production secrets in secure vault (Vault/K8s/AWS SSM)
# This file serves as a template with secure example values
# ===================================================================

# ===================================================================
# SPRING BOOT CORE CONFIGURATION
# ===================================================================
# Spring profiles (prod, stage, dev)
SPRING_PROFILES_ACTIVE=prod
# Application port
SERVER_PORT=8080
# Time zone configuration
TZ=UTC
# Jackson serialization
SPRING_JACKSON_SERIALIZATION_WRITE_DATES_AS_TIMESTAMPS=false
SPRING_JACKSON_TIME_ZONE=UTC

# ===================================================================
# DATABASE CONFIGURATION (PostgreSQL 15+)
# Compatible with Spring Boot 3.1.7 + Hibernate 6.2
# ===================================================================
# Connection parameters (Spring Boot standard naming)
SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/smm_panel?sslmode=require&currentSchema=public&stringtype=unspecified
SPRING_DATASOURCE_USERNAME=smm_admin
SPRING_DATASOURCE_PASSWORD=a+rq4Vq9n76ZUTSklnb6gEQdtuBwqbN/yvl8MenpOUY=
SPRING_DATASOURCE_DRIVER_CLASS_NAME=org.postgresql.Driver

# HikariCP Connection Pool (Spring Boot 3.x naming)
SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE=30
SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE=10
SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT=20000
SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT=600000
SPRING_DATASOURCE_HIKARI_MAX_LIFETIME=1800000
SPRING_DATASOURCE_HIKARI_LEAK_DETECTION_THRESHOLD=60000
SPRING_DATASOURCE_HIKARI_CONNECTION_TEST_QUERY=SELECT 1
SPRING_DATASOURCE_HIKARI_POOL_NAME=SMM-Panel-HikariCP

# Legacy naming for backward compatibility
DB_HOST=postgres
DB_PORT=5432
DB_NAME=smm_panel
DB_USER=smm_admin
DB_PASSWORD=a+rq4Vq9n76ZUTSklnb6gEQdtuBwqbN/yvl8MenpOUY=
DB_MAX_POOL_SIZE=30
DB_MIN_IDLE=10
DB_CONNECTION_TIMEOUT=20000
DB_IDLE_TIMEOUT=600000
DB_MAX_LIFETIME=1800000
DB_LEAK_DETECTION_THRESHOLD=60000

# PostgreSQL specific tuning
POSTGRES_DB=smm_panel
POSTGRES_USER=smm_admin
POSTGRES_PASSWORD=a+rq4Vq9n76ZUTSklnb6gEQdtuBwqbN/yvl8MenpOUY=

# ===================================================================
# REDIS CONFIGURATION (Redis 7.x + Lettuce 6.2.6)
# Compatible with Spring Data Redis 3.1.x
# ===================================================================
# Spring Boot standard Redis configuration
SPRING_DATA_REDIS_HOST=redis
SPRING_DATA_REDIS_PORT=6379
SPRING_DATA_REDIS_PASSWORD=ZQx+Yviuxvv2lk65Ikrn2s3K03klmEOLSxj0WYWYoaQ=
SPRING_DATA_REDIS_DATABASE=0
SPRING_DATA_REDIS_TIMEOUT=5000ms
SPRING_DATA_REDIS_SSL_ENABLED=false

# Lettuce connection pool settings
SPRING_DATA_REDIS_LETTUCE_POOL_ENABLED=true
SPRING_DATA_REDIS_LETTUCE_POOL_MAX_ACTIVE=50
SPRING_DATA_REDIS_LETTUCE_POOL_MAX_IDLE=20
SPRING_DATA_REDIS_LETTUCE_POOL_MIN_IDLE=5
SPRING_DATA_REDIS_LETTUCE_POOL_MAX_WAIT=2000ms
SPRING_DATA_REDIS_LETTUCE_SHUTDOWN_TIMEOUT=2000ms

# Legacy naming for backward compatibility
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=ZQx+Yviuxvv2lk65Ikrn2s3K03klmEOLSxj0WYWYoaQ=

# Redis ACL configuration (Redis 6+)
REDIS_ACL_USERNAME=smm_app_user
REDIS_ACL_PASSWORD=ZQx+Yviuxvv2lk65Ikrn2s3K03klmEOLSxj0WYWYoaQ=
REDIS_ACL_PERMISSIONS=+@all -flushdb -flushall -keys -config

# ===================================================================
# KAFKA CONFIGURATION (Kafka 3.x)
# Compatible with Spring Kafka 3.0.x
# ===================================================================
# Spring Boot standard Kafka configuration
SPRING_KAFKA_BOOTSTRAP_SERVERS=kafka:9092
SPRING_KAFKA_CONSUMER_GROUP_ID=smm-panel-group
SPRING_KAFKA_CONSUMER_AUTO_OFFSET_RESET=earliest
SPRING_KAFKA_CONSUMER_KEY_DESERIALIZER=org.apache.kafka.common.serialization.StringDeserializer
SPRING_KAFKA_CONSUMER_VALUE_DESERIALIZER=org.springframework.kafka.support.serializer.ErrorHandlingDeserializer
SPRING_KAFKA_CONSUMER_PROPERTIES_SPRING_JSON_TRUSTED_PACKAGES=com.smmpanel.*,java.util

SPRING_KAFKA_PRODUCER_KEY_SERIALIZER=org.apache.kafka.common.serialization.StringSerializer
SPRING_KAFKA_PRODUCER_VALUE_SERIALIZER=org.springframework.kafka.support.serializer.JsonSerializer
SPRING_KAFKA_PRODUCER_ACKS=all
SPRING_KAFKA_PRODUCER_RETRIES=3
SPRING_KAFKA_PRODUCER_PROPERTIES_ENABLE_IDEMPOTENCE=true

# Legacy naming for backward compatibility
KAFKA_BOOTSTRAP_SERVERS=kafka:9092

# Kafka security (production)
KAFKA_SECURITY_PROTOCOL=SASL_SSL
KAFKA_SASL_MECHANISM=SCRAM-SHA-512
KAFKA_SASL_JAAS_CONFIG=org.apache.kafka.common.security.scram.ScramLoginModule required username="smm-panel-producer" password="kafka-secure-password-2025";
KAFKA_SSL_TRUSTSTORE_LOCATION=/etc/kafka/secrets/kafka.client.truststore.jks
KAFKA_SSL_TRUSTSTORE_PASSWORD=truststore-password
KAFKA_SSL_KEYSTORE_LOCATION=/etc/kafka/secrets/kafka.client.keystore.jks
KAFKA_SSL_KEYSTORE_PASSWORD=keystore-password

# ===================================================================
# JWT SECURITY CONFIGURATION
# JJWT 0.12.3 Compatible
# ===================================================================
# Cryptographically secure JWT secret (minimum 64 characters, base64 encoded)
JWT_SECRET=x384KbAo+gKo9v2mm2ey2ytwNwugseo7qj5mpnTOegbBKf6Agh/CbhbV9on09Kii
JWT_EXPIRATION_MS=86400000  # 24 hours
JWT_REFRESH_EXPIRATION_MS=604800000  # 7 days
JWT_ISSUER=smm-panel-api
JWT_AUDIENCE=smm-panel-clients

# API Key Security
API_KEY_GLOBAL_SALT=f7298c2a17826c079721d1650d416e9833192958fced50afcf4efdab86a9e50a
API_KEY_HASH_ALGORITHM=SHA-256

# ===================================================================
# LIQUIBASE DATABASE MIGRATION
# Liquibase 4.24+ Compatible
# ===================================================================
SPRING_LIQUIBASE_CHANGE_LOG=classpath:db/changelog/db.changelog-master.xml
SPRING_LIQUIBASE_ENABLED=true
SPRING_LIQUIBASE_CONTEXTS=prod
SPRING_LIQUIBASE_DEFAULT_SCHEMA=public
SPRING_LIQUIBASE_LIQUIBASE_SCHEMA=public
LIQUIBASE_SHOULD_RUN=true

# ===================================================================
# HIBERNATE CONFIGURATION
# Hibernate 6.2.x Compatible (Spring Boot 3.1.7)
# ===================================================================
SPRING_JPA_HIBERNATE_DDL_AUTO=validate
SPRING_JPA_SHOW_SQL=false
SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQLDialect
SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL=false
SPRING_JPA_PROPERTIES_HIBERNATE_USE_SQL_COMMENTS=false
SPRING_JPA_PROPERTIES_HIBERNATE_GENERATE_STATISTICS=false
SPRING_JPA_PROPERTIES_HIBERNATE_JDBC_BATCH_SIZE=25
SPRING_JPA_PROPERTIES_HIBERNATE_ORDER_INSERTS=true
SPRING_JPA_PROPERTIES_HIBERNATE_ORDER_UPDATES=true

# Hibernate performance settings
HIBERNATE_SHOW_SQL=false
HIBERNATE_FORMAT_SQL=false
HIBERNATE_SQL_COMMENTS=false
HIBERNATE_STATISTICS=false
HIBERNATE_BATCH_SIZE=25
HIBERNATE_FETCH_SIZE=50
HIBERNATE_DEFAULT_BATCH_FETCH_SIZE=16
HIBERNATE_QUERY_PLAN_CACHE_SIZE=2048
HIBERNATE_QUERY_PLAN_PARAMETER_CACHE_SIZE=128
HIBERNATE_L2_CACHE_ENABLED=true
HIBERNATE_QUERY_CACHE_ENABLED=true

# ===================================================================
# EXTERNAL API INTEGRATIONS
# ===================================================================
# Binom Integration (V2 API)
BINOM_API_URL=https://your-binom-domain.com/api
BINOM_API_KEY=your-production-binom-api-key-here
BINOM_API_TIMEOUT=30000
BINOM_RETRY_ATTEMPTS=3
BINOM_API_VERSION=v2
BINOM_DEFAULT_COEFFICIENT=3.0
BINOM_MAX_CAMPAIGNS_PER_ORDER=5
BINOM_MONITORING_ENABLED=true
BINOM_CACHE_ENABLED=true
BINOM_RATE_LIMITING_ENABLED=true

# YouTube API
YOUTUBE_API_KEY=your-production-youtube-api-key-here
YOUTUBE_QUOTA_DAILY_LIMIT=10000
YOUTUBE_QUOTA_PER_100_SECONDS=100

# Cryptomus Payment Processing
CRYPTOMUS_API_URL=https://api.cryptomus.com/v1
CRYPTOMUS_API_KEY=your-production-cryptomus-api-key
CRYPTOMUS_API_SECRET=your-production-cryptomus-secret
CRYPTOMUS_WEBHOOK_SECRET=your-production-webhook-secret
CRYPTOMUS_MERCHANT_ID=your-merchant-id
CRYPTOMUS_MIN_DEPOSIT=5.00

# ===================================================================
# CORS CONFIGURATION
# ===================================================================
CORS_ORIGINS=https://your-production-domain.com,https://api.your-production-domain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# ===================================================================
# MONITORING & OBSERVABILITY
# ===================================================================
# Spring Boot Actuator
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=when-authorized
MANAGEMENT_ENDPOINT_HEALTH_SHOW_COMPONENTS=always
MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED=true

# Grafana
GRAFANA_USER=admin
GRAFANA_PASSWORD=your-secure-grafana-password-here

# Application metrics
METRICS_EXPORT_ENABLED=true
METRICS_EXPORT_INTERVAL=60s

# ===================================================================
# RESILIENCE4J CIRCUIT BREAKER
# ===================================================================
BINOM_CB_FAILURE_RATE_THRESHOLD=45
BINOM_CB_SLOW_CALL_RATE_THRESHOLD=40
BINOM_CB_SLOW_CALL_DURATION=PT8S
BINOM_CB_WAIT_DURATION_OPEN=PT45S
BINOM_CB_MIN_CALLS=15
BINOM_CB_SLIDING_WINDOW_SIZE=30
BINOM_RETRY_MAX_ATTEMPTS=4
BINOM_RETRY_WAIT_DURATION=PT2S
BINOM_RETRY_BACKOFF_MULTIPLIER=1.8

# ===================================================================
# PERFORMANCE TUNING
# ===================================================================
# Thread pools
SPRING_TASK_EXECUTION_POOL_CORE_SIZE=8
SPRING_TASK_EXECUTION_POOL_MAX_SIZE=20
SPRING_TASK_EXECUTION_POOL_QUEUE_CAPACITY=1000
SPRING_TASK_SCHEDULING_POOL_SIZE=5

# Tomcat
SERVER_TOMCAT_MAX_CONNECTIONS=8192
SERVER_TOMCAT_THREADS_MAX=200
SERVER_TOMCAT_THREADS_MIN_SPARE=10
SERVER_TOMCAT_CONNECTION_TIMEOUT=PT20S
SERVER_TOMCAT_KEEP_ALIVE_TIMEOUT=PT20S

# ===================================================================
# CACHE CONFIGURATION (TTL in seconds)
# ===================================================================
CACHE_SERVICES_TTL=3600
CACHE_USERS_TTL=1800
CACHE_COEFFICIENTS_TTL=7200
CACHE_YOUTUBE_TTL=600

# Redis cache configuration
SPRING_CACHE_TYPE=redis
SPRING_CACHE_REDIS_TIME_TO_LIVE=300000
SPRING_CACHE_REDIS_KEY_PREFIX=smm:cache:
SPRING_CACHE_REDIS_USE_KEY_PREFIX=true
SPRING_CACHE_REDIS_CACHE_NULL_VALUES=false

# ===================================================================
# LOGGING CONFIGURATION
# ===================================================================
LOGGING_LEVEL_ROOT=WARN
LOGGING_LEVEL_COM_SMMPANEL=INFO
LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_SECURITY=WARN
LOGGING_LEVEL_ORG_HIBERNATE_SQL=WARN
LOGGING_PATTERN_CONSOLE=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
LOG_FILE_PATH=/var/log/smm-panel/application.log

# ===================================================================
# FEATURE FLAGS
# ===================================================================
YOUTUBE_PROCESSING_ENABLED=true
BINOM_INTEGRATION_ENABLED=true
PAYMENT_PROCESSING_ENABLED=true
EMAIL_NOTIFICATIONS_ENABLED=true
PERFECTPANEL_COMPATIBLE=true

# ===================================================================
# SECURITY HEADERS & SETTINGS
# ===================================================================
SECURITY_REQUIRE_SSL=true
SECURITY_HEADERS_FRAME_OPTIONS=DENY
SECURITY_HEADERS_XSS_PROTECTION=1; mode=block
SECURITY_HEADERS_CONTENT_TYPE_OPTIONS=nosniff
SECURITY_HEADERS_REFERRER_POLICY=strict-origin-when-cross-origin
SECURITY_HEADERS_CONTENT_SECURITY_POLICY=default-src 'self'

# ===================================================================
# RATE LIMITING
# ===================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_ORDERS_PER_MINUTE=10
RATE_LIMIT_ORDERS_PER_HOUR=100
RATE_LIMIT_API_PER_MINUTE=60
RATE_LIMIT_API_PER_HOUR=1000
RATE_LIMIT_AUTH_PER_MINUTE=5

# ===================================================================
# APPLICATION SPECIFIC
# ===================================================================
APP_NAME=SMM Panel
APP_VERSION=1.0.0
APP_ENVIRONMENT=production
APP_DEBUG=false
TEST_MODE=false
DEBUG_API_REQUESTS=false
ENABLE_SWAGGER_UI=false

# ===================================================================
# TRANSACTION MANAGEMENT
# ===================================================================
TRANSACTION_MONITORING_ENABLED=true
TRANSACTION_TRACE_ENABLED=false

# ===================================================================
# MISCELLANEOUS
# ===================================================================
DEFAULT_CURRENCY=USD
EXCHANGE_RATE_API_URL=https://api.exchangerate.host/latest
EXCHANGE_RATE_BASE_CURRENCY=USD
EXCHANGE_RATE_API_TIMEOUT_MS=5000

EMAIL_ENABLED=true
EMAIL_FROM=noreply@your-domain.com
EMAIL_SMTP_HOST=smtp.your-provider.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USERNAME=your-email@your-domain.com
EMAIL_SMTP_PASSWORD=your-smtp-password
EMAIL_SMTP_AUTH=true
EMAIL_SMTP_STARTTLS_ENABLE=true

# File upload
FILE_UPLOAD_PATH=/var/data/smm-panel/uploads
FILE_UPLOAD_MAX_SIZE=50MB

# Error recovery
ERROR_RECOVERY_MAX_RETRIES=3
ERROR_RECOVERY_INITIAL_DELAY_MINUTES=5
ERROR_RECOVERY_MAX_DELAY_HOURS=24
ERROR_RECOVERY_BACKOFF_MULTIPLIER=2.0

# Dead letter queue
DLQ_RETENTION_DAYS=30
DLQ_MAX_ENTRIES=10000

# Selenium (for YouTube automation)
SELENIUM_DRIVER_PATH=/usr/local/bin/chromedriver
SELENIUM_HEADLESS=true
SELENIUM_HUB_URL=http://selenium-hub:4444/wd/hub

# ===================================================================
# END OF CONFIGURATION
# ===================================================================