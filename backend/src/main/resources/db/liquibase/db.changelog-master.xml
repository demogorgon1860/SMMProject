<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog 
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd
                        http://www.liquibase.org/xml/ns/dbchangelog-ext 
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <!-- 
    SMM Panel Database Migration Master Changelog
    
    Version Strategy: Semantic Versioning (MAJOR.MINOR.PATCH)
    - MAJOR: Breaking schema changes, major feature releases
    - MINOR: New features, non-breaking schema additions  
    - PATCH: Bug fixes, performance optimizations, index additions
    
    Context Strategy:
    - 'dev': Development-only changes (test data, debug indexes)
    - 'stage': Staging environment changes (performance tuning)
    - 'prod': Production-safe changes only
    - 'all': Changes for all environments (default)
    - 'migration': One-time migration from Flyway to Liquibase
    -->

    <!-- Migration from Flyway: Baseline existing schema -->
    <include file="migrations/v1.0.0-baseline-from-flyway.xml" context="migration"/>
    
    <!-- Performance and Index Optimizations -->
    <include file="migrations/v1.0.1-add-missing-fk-indexes.xml" context="all"/>
    <include file="migrations/v1.0.2-add-hot-column-indexes.xml" context="all"/>
    <include file="migrations/v1.0.3-add-composite-indexes.xml" context="prod,stage"/>
    <include file="migrations/v1.0.4-add-partial-indexes.xml" context="prod"/>
    
    <!-- Schema Improvements -->
    <include file="migrations/v1.1.0-enhance-error-handling.xml" context="all"/>
    
    <!-- Development Support -->
    <include file="migrations/v1.2.0-dev-test-data.xml" context="dev"/>
    
    <!-- Migrated from Flyway SQL Migrations -->
    <include file="migrations/v1.3.0-migrate-flyway-v1.1.xml" context="all"/>
    <!-- Note: Additional Flyway migrations will be converted to Liquibase format
         and included here in semantic version order -->

</databaseChangeLog>